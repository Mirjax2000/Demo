Index: app_sprava_montazi/migrations/0001_initial.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+># Generated by Django 5.2 on 2025-05-16 13:22\r\n\r\nimport django.db.models.deletion\r\nimport phonenumber_field.modelfields\r\nimport simple_history.models\r\nfrom django.conf import settings\r\nfrom django.db import migrations, models\r\n\r\n\r\nclass Migration(migrations.Migration):\r\n\r\n    initial = True\r\n\r\n    dependencies = [\r\n        migrations.swappable_dependency(settings.AUTH_USER_MODEL),\r\n    ]\r\n\r\n    operations = [\r\n        migrations.CreateModel(\r\n            name=\"Client\",\r\n            fields=[\r\n                (\r\n                    \"id\",\r\n                    models.BigAutoField(\r\n                        auto_created=True,\r\n                        primary_key=True,\r\n                        serialize=False,\r\n                        verbose_name=\"ID\",\r\n                    ),\r\n                ),\r\n                (\r\n                    \"name\",\r\n                    models.CharField(max_length=75, verbose_name=\"Jméno zákazníka\"),\r\n                ),\r\n                (\r\n                    \"street\",\r\n                    models.CharField(blank=True, max_length=50, verbose_name=\"Ulice\"),\r\n                ),\r\n                (\r\n                    \"city\",\r\n                    models.CharField(blank=True, max_length=32, verbose_name=\"Město\"),\r\n                ),\r\n                (\"zip_code\", models.CharField(max_length=5, verbose_name=\"PSČ\")),\r\n                (\r\n                    \"phone\",\r\n                    phonenumber_field.modelfields.PhoneNumberField(\r\n                        blank=True, max_length=17, region=None, verbose_name=\"Telefon\"\r\n                    ),\r\n                ),\r\n                (\r\n                    \"email\",\r\n                    models.EmailField(\r\n                        blank=True, max_length=254, verbose_name=\"E-mail\"\r\n                    ),\r\n                ),\r\n                (\r\n                    \"incomplete\",\r\n                    models.BooleanField(default=True, verbose_name=\"Neúplný záznam\"),\r\n                ),\r\n                (\"slug\", models.SlugField(blank=True)),\r\n            ],\r\n        ),\r\n        migrations.CreateModel(\r\n            name=\"DistribHub\",\r\n            fields=[\r\n                (\r\n                    \"id\",\r\n                    models.BigAutoField(\r\n                        auto_created=True,\r\n                        primary_key=True,\r\n                        serialize=False,\r\n                        verbose_name=\"ID\",\r\n                    ),\r\n                ),\r\n                (\"code\", models.CharField(max_length=3, unique=True)),\r\n                (\"city\", models.CharField(max_length=32)),\r\n                (\"slug\", models.SlugField(blank=True, unique=True)),\r\n            ],\r\n        ),\r\n        migrations.CreateModel(\r\n            name=\"Team\",\r\n            fields=[\r\n                (\r\n                    \"id\",\r\n                    models.BigAutoField(\r\n                        auto_created=True,\r\n                        primary_key=True,\r\n                        serialize=False,\r\n                        verbose_name=\"ID\",\r\n                    ),\r\n                ),\r\n                (\r\n                    \"name\",\r\n                    models.CharField(\r\n                        max_length=32, unique=True, verbose_name=\"Společnost\"\r\n                    ),\r\n                ),\r\n                (\"city\", models.CharField(max_length=32, verbose_name=\"Město\")),\r\n                (\r\n                    \"region\",\r\n                    models.CharField(blank=True, max_length=32, verbose_name=\"Region\"),\r\n                ),\r\n                (\r\n                    \"phone\",\r\n                    phonenumber_field.modelfields.PhoneNumberField(\r\n                        max_length=17, region=None, verbose_name=\"Telefon\"\r\n                    ),\r\n                ),\r\n                (\r\n                    \"email\",\r\n                    models.EmailField(blank=True, max_length=64, verbose_name=\"E-mail\"),\r\n                ),\r\n                (\"active\", models.BooleanField(default=True, verbose_name=\"Aktivní\")),\r\n                (\r\n                    \"price_per_hour\",\r\n                    models.DecimalField(\r\n                        blank=True,\r\n                        decimal_places=2,\r\n                        max_digits=6,\r\n                        null=True,\r\n                        verbose_name=\"Cena za hodinu\",\r\n                    ),\r\n                ),\r\n                (\r\n                    \"price_per_km\",\r\n                    models.DecimalField(\r\n                        blank=True,\r\n                        decimal_places=2,\r\n                        max_digits=6,\r\n                        null=True,\r\n                        verbose_name=\"Cena za km\",\r\n                    ),\r\n                ),\r\n                (\"notes\", models.TextField(blank=True, verbose_name=\"Poznámka\")),\r\n                (\"slug\", models.SlugField(blank=True, unique=True)),\r\n            ],\r\n        ),\r\n        migrations.CreateModel(\r\n            name=\"Upload\",\r\n            fields=[\r\n                (\r\n                    \"id\",\r\n                    models.BigAutoField(\r\n                        auto_created=True,\r\n                        primary_key=True,\r\n                        serialize=False,\r\n                        verbose_name=\"ID\",\r\n                    ),\r\n                ),\r\n                (\"file\", models.FileField(upload_to=\"uploads/\")),\r\n                (\"created\", models.DateTimeField(auto_now_add=True)),\r\n            ],\r\n            options={\r\n                \"ordering\": [\"-created\"],\r\n            },\r\n        ),\r\n        migrations.CreateModel(\r\n            name=\"CallLog\",\r\n            fields=[\r\n                (\r\n                    \"id\",\r\n                    models.BigAutoField(\r\n                        auto_created=True,\r\n                        primary_key=True,\r\n                        serialize=False,\r\n                        verbose_name=\"ID\",\r\n                    ),\r\n                ),\r\n                (\r\n                    \"called_at\",\r\n                    models.DateTimeField(auto_now_add=True, verbose_name=\"Čas volání\"),\r\n                ),\r\n                (\"note\", models.TextField(blank=True, verbose_name=\"Poznámka\")),\r\n                (\r\n                    \"was_successful\",\r\n                    models.CharField(\r\n                        choices=[(\"Success\", \"Úspěšný\"), (\"Failed\", \"Neúspěšný\")],\r\n                        max_length=10,\r\n                        verbose_name=\"Dovoláno\",\r\n                    ),\r\n                ),\r\n                (\r\n                    \"client\",\r\n                    models.ForeignKey(\r\n                        on_delete=django.db.models.deletion.PROTECT,\r\n                        related_name=\"calls\",\r\n                        to=\"app_sprava_montazi.client\",\r\n                        verbose_name=\"Zákazník\",\r\n                    ),\r\n                ),\r\n            ],\r\n            options={\r\n                \"ordering\": [\"-called_at\"],\r\n            },\r\n        ),\r\n        migrations.CreateModel(\r\n            name=\"HistoricalCallLog\",\r\n            fields=[\r\n                (\r\n                    \"id\",\r\n                    models.BigIntegerField(\r\n                        auto_created=True, blank=True, db_index=True, verbose_name=\"ID\"\r\n                    ),\r\n                ),\r\n                (\r\n                    \"called_at\",\r\n                    models.DateTimeField(\r\n                        blank=True, editable=False, verbose_name=\"Čas volání\"\r\n                    ),\r\n                ),\r\n                (\"note\", models.TextField(blank=True, verbose_name=\"Poznámka\")),\r\n                (\r\n                    \"was_successful\",\r\n                    models.CharField(\r\n                        choices=[(\"Success\", \"Úspěšný\"), (\"Failed\", \"Neúspěšný\")],\r\n                        max_length=10,\r\n                        verbose_name=\"Dovoláno\",\r\n                    ),\r\n                ),\r\n                (\"history_id\", models.AutoField(primary_key=True, serialize=False)),\r\n                (\"history_date\", models.DateTimeField(db_index=True)),\r\n                (\"history_change_reason\", models.CharField(max_length=100, null=True)),\r\n                (\r\n                    \"history_type\",\r\n                    models.CharField(\r\n                        choices=[(\"+\", \"Created\"), (\"~\", \"Changed\"), (\"-\", \"Deleted\")],\r\n                        max_length=1,\r\n                    ),\r\n                ),\r\n                (\r\n                    \"client\",\r\n                    models.ForeignKey(\r\n                        blank=True,\r\n                        db_constraint=False,\r\n                        null=True,\r\n                        on_delete=django.db.models.deletion.DO_NOTHING,\r\n                        related_name=\"+\",\r\n                        to=\"app_sprava_montazi.client\",\r\n                        verbose_name=\"Zákazník\",\r\n                    ),\r\n                ),\r\n                (\r\n                    \"history_user\",\r\n                    models.ForeignKey(\r\n                        null=True,\r\n                        on_delete=django.db.models.deletion.SET_NULL,\r\n                        related_name=\"+\",\r\n                        to=settings.AUTH_USER_MODEL,\r\n                    ),\r\n                ),\r\n            ],\r\n            options={\r\n                \"verbose_name\": \"historical call log\",\r\n                \"verbose_name_plural\": \"historical call logs\",\r\n                \"ordering\": (\"-history_date\", \"-history_id\"),\r\n                \"get_latest_by\": (\"history_date\", \"history_id\"),\r\n            },\r\n            bases=(simple_history.models.HistoricalChanges, models.Model),\r\n        ),\r\n        migrations.CreateModel(\r\n            name=\"HistoricalClient\",\r\n            fields=[\r\n                (\r\n                    \"id\",\r\n                    models.BigIntegerField(\r\n                        auto_created=True, blank=True, db_index=True, verbose_name=\"ID\"\r\n                    ),\r\n                ),\r\n                (\r\n                    \"name\",\r\n                    models.CharField(max_length=75, verbose_name=\"Jméno zákazníka\"),\r\n                ),\r\n                (\r\n                    \"street\",\r\n                    models.CharField(blank=True, max_length=50, verbose_name=\"Ulice\"),\r\n                ),\r\n                (\r\n                    \"city\",\r\n                    models.CharField(blank=True, max_length=32, verbose_name=\"Město\"),\r\n                ),\r\n                (\"zip_code\", models.CharField(max_length=5, verbose_name=\"PSČ\")),\r\n                (\r\n                    \"phone\",\r\n                    phonenumber_field.modelfields.PhoneNumberField(\r\n                        blank=True, max_length=17, region=None, verbose_name=\"Telefon\"\r\n                    ),\r\n                ),\r\n                (\r\n                    \"email\",\r\n                    models.EmailField(\r\n                        blank=True, max_length=254, verbose_name=\"E-mail\"\r\n                    ),\r\n                ),\r\n                (\r\n                    \"incomplete\",\r\n                    models.BooleanField(default=True, verbose_name=\"Neúplný záznam\"),\r\n                ),\r\n                (\"slug\", models.SlugField(blank=True)),\r\n                (\"history_id\", models.AutoField(primary_key=True, serialize=False)),\r\n                (\"history_date\", models.DateTimeField(db_index=True)),\r\n                (\"history_change_reason\", models.CharField(max_length=100, null=True)),\r\n                (\r\n                    \"history_type\",\r\n                    models.CharField(\r\n                        choices=[(\"+\", \"Created\"), (\"~\", \"Changed\"), (\"-\", \"Deleted\")],\r\n                        max_length=1,\r\n                    ),\r\n                ),\r\n                (\r\n                    \"history_user\",\r\n                    models.ForeignKey(\r\n                        null=True,\r\n                        on_delete=django.db.models.deletion.SET_NULL,\r\n                        related_name=\"+\",\r\n                        to=settings.AUTH_USER_MODEL,\r\n                    ),\r\n                ),\r\n            ],\r\n            options={\r\n                \"verbose_name\": \"historical client\",\r\n                \"verbose_name_plural\": \"historical clients\",\r\n                \"ordering\": (\"-history_date\", \"-history_id\"),\r\n                \"get_latest_by\": (\"history_date\", \"history_id\"),\r\n            },\r\n            bases=(simple_history.models.HistoricalChanges, models.Model),\r\n        ),\r\n        migrations.CreateModel(\r\n            name=\"HistoricalDistribHub\",\r\n            fields=[\r\n                (\r\n                    \"id\",\r\n                    models.BigIntegerField(\r\n                        auto_created=True, blank=True, db_index=True, verbose_name=\"ID\"\r\n                    ),\r\n                ),\r\n                (\"code\", models.CharField(db_index=True, max_length=3)),\r\n                (\"city\", models.CharField(max_length=32)),\r\n                (\"slug\", models.SlugField(blank=True)),\r\n                (\"history_id\", models.AutoField(primary_key=True, serialize=False)),\r\n                (\"history_date\", models.DateTimeField(db_index=True)),\r\n                (\"history_change_reason\", models.CharField(max_length=100, null=True)),\r\n                (\r\n                    \"history_type\",\r\n                    models.CharField(\r\n                        choices=[(\"+\", \"Created\"), (\"~\", \"Changed\"), (\"-\", \"Deleted\")],\r\n                        max_length=1,\r\n                    ),\r\n                ),\r\n                (\r\n                    \"history_user\",\r\n                    models.ForeignKey(\r\n                        null=True,\r\n                        on_delete=django.db.models.deletion.SET_NULL,\r\n                        related_name=\"+\",\r\n                        to=settings.AUTH_USER_MODEL,\r\n                    ),\r\n                ),\r\n            ],\r\n            options={\r\n                \"verbose_name\": \"historical distrib hub\",\r\n                \"verbose_name_plural\": \"historical distrib hubs\",\r\n                \"ordering\": (\"-history_date\", \"-history_id\"),\r\n                \"get_latest_by\": (\"history_date\", \"history_id\"),\r\n            },\r\n            bases=(simple_history.models.HistoricalChanges, models.Model),\r\n        ),\r\n        migrations.CreateModel(\r\n            name=\"HistoricalTeam\",\r\n            fields=[\r\n                (\r\n                    \"id\",\r\n                    models.BigIntegerField(\r\n                        auto_created=True, blank=True, db_index=True, verbose_name=\"ID\"\r\n                    ),\r\n                ),\r\n                (\r\n                    \"name\",\r\n                    models.CharField(\r\n                        db_index=True, max_length=32, verbose_name=\"Společnost\"\r\n                    ),\r\n                ),\r\n                (\"city\", models.CharField(max_length=32, verbose_name=\"Město\")),\r\n                (\r\n                    \"region\",\r\n                    models.CharField(blank=True, max_length=32, verbose_name=\"Region\"),\r\n                ),\r\n                (\r\n                    \"phone\",\r\n                    phonenumber_field.modelfields.PhoneNumberField(\r\n                        max_length=17, region=None, verbose_name=\"Telefon\"\r\n                    ),\r\n                ),\r\n                (\r\n                    \"email\",\r\n                    models.EmailField(blank=True, max_length=64, verbose_name=\"E-mail\"),\r\n                ),\r\n                (\"active\", models.BooleanField(default=True, verbose_name=\"Aktivní\")),\r\n                (\r\n                    \"price_per_hour\",\r\n                    models.DecimalField(\r\n                        blank=True,\r\n                        decimal_places=2,\r\n                        max_digits=6,\r\n                        null=True,\r\n                        verbose_name=\"Cena za hodinu\",\r\n                    ),\r\n                ),\r\n                (\r\n                    \"price_per_km\",\r\n                    models.DecimalField(\r\n                        blank=True,\r\n                        decimal_places=2,\r\n                        max_digits=6,\r\n                        null=True,\r\n                        verbose_name=\"Cena za km\",\r\n                    ),\r\n                ),\r\n                (\"notes\", models.TextField(blank=True, verbose_name=\"Poznámka\")),\r\n                (\"slug\", models.SlugField(blank=True)),\r\n                (\"history_id\", models.AutoField(primary_key=True, serialize=False)),\r\n                (\"history_date\", models.DateTimeField(db_index=True)),\r\n                (\"history_change_reason\", models.CharField(max_length=100, null=True)),\r\n                (\r\n                    \"history_type\",\r\n                    models.CharField(\r\n                        choices=[(\"+\", \"Created\"), (\"~\", \"Changed\"), (\"-\", \"Deleted\")],\r\n                        max_length=1,\r\n                    ),\r\n                ),\r\n                (\r\n                    \"history_user\",\r\n                    models.ForeignKey(\r\n                        null=True,\r\n                        on_delete=django.db.models.deletion.SET_NULL,\r\n                        related_name=\"+\",\r\n                        to=settings.AUTH_USER_MODEL,\r\n                    ),\r\n                ),\r\n            ],\r\n            options={\r\n                \"verbose_name\": \"historical team\",\r\n                \"verbose_name_plural\": \"historical teams\",\r\n                \"ordering\": (\"-history_date\", \"-history_id\"),\r\n                \"get_latest_by\": (\"history_date\", \"history_id\"),\r\n            },\r\n            bases=(simple_history.models.HistoricalChanges, models.Model),\r\n        ),\r\n        migrations.CreateModel(\r\n            name=\"HistoricalUpload\",\r\n            fields=[\r\n                (\r\n                    \"id\",\r\n                    models.BigIntegerField(\r\n                        auto_created=True, blank=True, db_index=True, verbose_name=\"ID\"\r\n                    ),\r\n                ),\r\n                (\"file\", models.TextField(max_length=100)),\r\n                (\"created\", models.DateTimeField(blank=True, editable=False)),\r\n                (\"history_id\", models.AutoField(primary_key=True, serialize=False)),\r\n                (\"history_date\", models.DateTimeField(db_index=True)),\r\n                (\"history_change_reason\", models.CharField(max_length=100, null=True)),\r\n                (\r\n                    \"history_type\",\r\n                    models.CharField(\r\n                        choices=[(\"+\", \"Created\"), (\"~\", \"Changed\"), (\"-\", \"Deleted\")],\r\n                        max_length=1,\r\n                    ),\r\n                ),\r\n                (\r\n                    \"history_user\",\r\n                    models.ForeignKey(\r\n                        null=True,\r\n                        on_delete=django.db.models.deletion.SET_NULL,\r\n                        related_name=\"+\",\r\n                        to=settings.AUTH_USER_MODEL,\r\n                    ),\r\n                ),\r\n            ],\r\n            options={\r\n                \"verbose_name\": \"historical upload\",\r\n                \"verbose_name_plural\": \"historical uploads\",\r\n                \"ordering\": (\"-history_date\", \"-history_id\"),\r\n                \"get_latest_by\": (\"history_date\", \"history_id\"),\r\n            },\r\n            bases=(simple_history.models.HistoricalChanges, models.Model),\r\n        ),\r\n        migrations.CreateModel(\r\n            name=\"Order\",\r\n            fields=[\r\n                (\r\n                    \"id\",\r\n                    models.BigAutoField(\r\n                        auto_created=True,\r\n                        primary_key=True,\r\n                        serialize=False,\r\n                        verbose_name=\"ID\",\r\n                    ),\r\n                ),\r\n                (\r\n                    \"order_number\",\r\n                    models.CharField(\r\n                        max_length=32, unique=True, verbose_name=\"Číslo zakázky\"\r\n                    ),\r\n                ),\r\n                (\"mandant\", models.CharField(max_length=4, verbose_name=\"Mandant\")),\r\n                (\r\n                    \"status\",\r\n                    models.CharField(\r\n                        choices=[\r\n                            (\"New\", \"Nový\"),\r\n                            (\"Adviced\", \"Zatermínováno\"),\r\n                            (\"Realized\", \"Realizováno\"),\r\n                            (\"Billed\", \"Vyúčtovaný\"),\r\n                            (\"Canceled\", \"Zrušeno\"),\r\n                            (\"Hidden\", \"Skryto\"),\r\n                        ],\r\n                        default=\"New\",\r\n                        max_length=32,\r\n                        verbose_name=\"Stav\",\r\n                    ),\r\n                ),\r\n                (\r\n                    \"delivery_termin\",\r\n                    models.DateField(\r\n                        blank=True, null=True, verbose_name=\"Termín doručení\"\r\n                    ),\r\n                ),\r\n                (\"evidence_termin\", models.DateField(verbose_name=\"Termín evidence\")),\r\n                (\r\n                    \"montage_termin\",\r\n                    models.DateTimeField(\r\n                        blank=True, null=True, verbose_name=\"Termín montáže\"\r\n                    ),\r\n                ),\r\n                (\r\n                    \"team_type\",\r\n                    models.CharField(\r\n                        blank=True,\r\n                        choices=[\r\n                            (\"By_customer\", \"Zákazníkem\"),\r\n                            (\"By_delivery_crew\", \"Dopravcem\"),\r\n                            (\"By_assembly_crew\", \"Montážníky\"),\r\n                        ],\r\n                        default=\"By_assembly_crew\",\r\n                        max_length=32,\r\n                        verbose_name=\"Realizace kým\",\r\n                    ),\r\n                ),\r\n                (\"notes\", models.TextField(blank=True, verbose_name=\"Poznámky\")),\r\n                (\r\n                    \"client\",\r\n                    models.ForeignKey(\r\n                        blank=True,\r\n                        null=True,\r\n                        on_delete=django.db.models.deletion.PROTECT,\r\n                        to=\"app_sprava_montazi.client\",\r\n                        verbose_name=\"Zákazník\",\r\n                    ),\r\n                ),\r\n                (\r\n                    \"distrib_hub\",\r\n                    models.ForeignKey(\r\n                        on_delete=django.db.models.deletion.PROTECT,\r\n                        to=\"app_sprava_montazi.distribhub\",\r\n                        verbose_name=\"Místo určení\",\r\n                    ),\r\n                ),\r\n                (\r\n                    \"team\",\r\n                    models.ForeignKey(\r\n                        blank=True,\r\n                        limit_choices_to={\"active\": True},\r\n                        null=True,\r\n                        on_delete=django.db.models.deletion.PROTECT,\r\n                        to=\"app_sprava_montazi.team\",\r\n                        verbose_name=\"Montážní tým\",\r\n                    ),\r\n                ),\r\n            ],\r\n            options={\r\n                \"ordering\": [\"-order_number\"],\r\n            },\r\n        ),\r\n        migrations.CreateModel(\r\n            name=\"HistoricalArticle\",\r\n            fields=[\r\n                (\r\n                    \"id\",\r\n                    models.BigIntegerField(\r\n                        auto_created=True, blank=True, db_index=True, verbose_name=\"ID\"\r\n                    ),\r\n                ),\r\n                (\"name\", models.CharField(max_length=32, verbose_name=\"Název artiklu\")),\r\n                (\r\n                    \"price\",\r\n                    models.DecimalField(\r\n                        blank=True,\r\n                        decimal_places=2,\r\n                        max_digits=10,\r\n                        null=True,\r\n                        verbose_name=\"Cena\",\r\n                    ),\r\n                ),\r\n                (\r\n                    \"quantity\",\r\n                    models.PositiveIntegerField(default=1, verbose_name=\"Množství\"),\r\n                ),\r\n                (\"note\", models.TextField(blank=True, verbose_name=\"Popis\")),\r\n                (\"history_id\", models.AutoField(primary_key=True, serialize=False)),\r\n                (\"history_date\", models.DateTimeField(db_index=True)),\r\n                (\"history_change_reason\", models.CharField(max_length=100, null=True)),\r\n                (\r\n                    \"history_type\",\r\n                    models.CharField(\r\n                        choices=[(\"+\", \"Created\"), (\"~\", \"Changed\"), (\"-\", \"Deleted\")],\r\n                        max_length=1,\r\n                    ),\r\n                ),\r\n                (\r\n                    \"history_user\",\r\n                    models.ForeignKey(\r\n                        null=True,\r\n                        on_delete=django.db.models.deletion.SET_NULL,\r\n                        related_name=\"+\",\r\n                        to=settings.AUTH_USER_MODEL,\r\n                    ),\r\n                ),\r\n                (\r\n                    \"order\",\r\n                    models.ForeignKey(\r\n                        blank=True,\r\n                        db_constraint=False,\r\n                        null=True,\r\n                        on_delete=django.db.models.deletion.DO_NOTHING,\r\n                        related_name=\"+\",\r\n                        to=\"app_sprava_montazi.order\",\r\n                        verbose_name=\"zakazka\",\r\n                    ),\r\n                ),\r\n            ],\r\n            options={\r\n                \"verbose_name\": \"historical article\",\r\n                \"verbose_name_plural\": \"historical articles\",\r\n                \"ordering\": (\"-history_date\", \"-history_id\"),\r\n                \"get_latest_by\": (\"history_date\", \"history_id\"),\r\n            },\r\n            bases=(simple_history.models.HistoricalChanges, models.Model),\r\n        ),\r\n        migrations.CreateModel(\r\n            name=\"Article\",\r\n            fields=[\r\n                (\r\n                    \"id\",\r\n                    models.BigAutoField(\r\n                        auto_created=True,\r\n                        primary_key=True,\r\n                        serialize=False,\r\n                        verbose_name=\"ID\",\r\n                    ),\r\n                ),\r\n                (\"name\", models.CharField(max_length=32, verbose_name=\"Název artiklu\")),\r\n                (\r\n                    \"price\",\r\n                    models.DecimalField(\r\n                        blank=True,\r\n                        decimal_places=2,\r\n                        max_digits=10,\r\n                        null=True,\r\n                        verbose_name=\"Cena\",\r\n                    ),\r\n                ),\r\n                (\r\n                    \"quantity\",\r\n                    models.PositiveIntegerField(default=1, verbose_name=\"Množství\"),\r\n                ),\r\n                (\"note\", models.TextField(blank=True, verbose_name=\"Popis\")),\r\n                (\r\n                    \"order\",\r\n                    models.ForeignKey(\r\n                        on_delete=django.db.models.deletion.PROTECT,\r\n                        related_name=\"articles\",\r\n                        to=\"app_sprava_montazi.order\",\r\n                        verbose_name=\"zakazka\",\r\n                    ),\r\n                ),\r\n            ],\r\n        ),\r\n        migrations.CreateModel(\r\n            name=\"HistoricalOrder\",\r\n            fields=[\r\n                (\r\n                    \"id\",\r\n                    models.BigIntegerField(\r\n                        auto_created=True, blank=True, db_index=True, verbose_name=\"ID\"\r\n                    ),\r\n                ),\r\n                (\r\n                    \"order_number\",\r\n                    models.CharField(\r\n                        db_index=True, max_length=32, verbose_name=\"Číslo zakázky\"\r\n                    ),\r\n                ),\r\n                (\"mandant\", models.CharField(max_length=4, verbose_name=\"Mandant\")),\r\n                (\r\n                    \"status\",\r\n                    models.CharField(\r\n                        choices=[\r\n                            (\"New\", \"Nový\"),\r\n                            (\"Adviced\", \"Zatermínováno\"),\r\n                            (\"Realized\", \"Realizováno\"),\r\n                            (\"Billed\", \"Vyúčtovaný\"),\r\n                            (\"Canceled\", \"Zrušeno\"),\r\n                            (\"Hidden\", \"Skryto\"),\r\n                        ],\r\n                        default=\"New\",\r\n                        max_length=32,\r\n                        verbose_name=\"Stav\",\r\n                    ),\r\n                ),\r\n                (\r\n                    \"delivery_termin\",\r\n                    models.DateField(\r\n                        blank=True, null=True, verbose_name=\"Termín doručení\"\r\n                    ),\r\n                ),\r\n                (\"evidence_termin\", models.DateField(verbose_name=\"Termín evidence\")),\r\n                (\r\n                    \"montage_termin\",\r\n                    models.DateTimeField(\r\n                        blank=True, null=True, verbose_name=\"Termín montáže\"\r\n                    ),\r\n                ),\r\n                (\r\n                    \"team_type\",\r\n                    models.CharField(\r\n                        blank=True,\r\n                        choices=[\r\n                            (\"By_customer\", \"Zákazníkem\"),\r\n                            (\"By_delivery_crew\", \"Dopravcem\"),\r\n                            (\"By_assembly_crew\", \"Montážníky\"),\r\n                        ],\r\n                        default=\"By_assembly_crew\",\r\n                        max_length=32,\r\n                        verbose_name=\"Realizace kým\",\r\n                    ),\r\n                ),\r\n                (\"notes\", models.TextField(blank=True, verbose_name=\"Poznámky\")),\r\n                (\"history_id\", models.AutoField(primary_key=True, serialize=False)),\r\n                (\"history_date\", models.DateTimeField(db_index=True)),\r\n                (\"history_change_reason\", models.CharField(max_length=100, null=True)),\r\n                (\r\n                    \"history_type\",\r\n                    models.CharField(\r\n                        choices=[(\"+\", \"Created\"), (\"~\", \"Changed\"), (\"-\", \"Deleted\")],\r\n                        max_length=1,\r\n                    ),\r\n                ),\r\n                (\r\n                    \"client\",\r\n                    models.ForeignKey(\r\n                        blank=True,\r\n                        db_constraint=False,\r\n                        null=True,\r\n                        on_delete=django.db.models.deletion.DO_NOTHING,\r\n                        related_name=\"+\",\r\n                        to=\"app_sprava_montazi.client\",\r\n                        verbose_name=\"Zákazník\",\r\n                    ),\r\n                ),\r\n                (\r\n                    \"distrib_hub\",\r\n                    models.ForeignKey(\r\n                        blank=True,\r\n                        db_constraint=False,\r\n                        null=True,\r\n                        on_delete=django.db.models.deletion.DO_NOTHING,\r\n                        related_name=\"+\",\r\n                        to=\"app_sprava_montazi.distribhub\",\r\n                        verbose_name=\"Místo určení\",\r\n                    ),\r\n                ),\r\n                (\r\n                    \"history_user\",\r\n                    models.ForeignKey(\r\n                        null=True,\r\n                        on_delete=django.db.models.deletion.SET_NULL,\r\n                        related_name=\"+\",\r\n                        to=settings.AUTH_USER_MODEL,\r\n                    ),\r\n                ),\r\n                (\r\n                    \"team\",\r\n                    models.ForeignKey(\r\n                        blank=True,\r\n                        db_constraint=False,\r\n                        limit_choices_to={\"active\": True},\r\n                        null=True,\r\n                        on_delete=django.db.models.deletion.DO_NOTHING,\r\n                        related_name=\"+\",\r\n                        to=\"app_sprava_montazi.team\",\r\n                        verbose_name=\"Montážní tým\",\r\n                    ),\r\n                ),\r\n            ],\r\n            options={\r\n                \"verbose_name\": \"historical order\",\r\n                \"verbose_name_plural\": \"historical orders\",\r\n                \"ordering\": (\"-history_date\", \"-history_id\"),\r\n                \"get_latest_by\": (\"history_date\", \"history_id\"),\r\n            },\r\n            bases=(simple_history.models.HistoricalChanges, models.Model),\r\n        ),\r\n    ]\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app_sprava_montazi/migrations/0001_initial.py b/app_sprava_montazi/migrations/0001_initial.py
--- a/app_sprava_montazi/migrations/0001_initial.py	(revision 17f02f0d342b997f003546f6e389a626ae502331)
+++ b/app_sprava_montazi/migrations/0001_initial.py	(date 1747662137901)
@@ -1,4 +1,4 @@
-# Generated by Django 5.2 on 2025-05-16 13:22
+# Generated by Django 5.2 on 2025-05-19 08:35
 
 import django.db.models.deletion
 import phonenumber_field.modelfields
Index: bot.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>\"\"\"Bot pro získání a aktualizaci zákazníků\"\"\"\r\n\r\nimport sys\r\nimport requests\r\nfrom rich.console import Console\r\n\r\ncons: Console = Console()\r\n\r\nTOKEN = \"40ecc9e490d45b6523c549aacae86acfe29bd5da\"\r\n\r\n# Adresa API\r\nAPI_URL_GET = \"http://localhost:8000/api/incomplete-customers/\"\r\nAPI_URL_UPDATE = \"http://localhost:8000/api/update-customers/\"\r\n\r\n# Hlavičky s autorizací\r\nheaders = {\r\n    \"Authorization\": f\"Token {TOKEN}\",\r\n    \"Content-Type\": \"application/json\",\r\n}\r\n\r\n# --- 1. Získání dat ---\r\nresponse = requests.get(API_URL_GET, headers=headers, timeout=5)\r\n\r\ndata = []\r\nif response.status_code == 200:\r\n    cons.log(\"Získávám data\", style=\"blue bold\")\r\n    data = response.json()\r\n    cons.log(\"Počet záznamů:\", len(data))\r\n    for item in data:\r\n        cons.log(\"Objednávka:\", item, style=\"green\")\r\nelse:\r\n    cons.log(\"Chyba:\", response.status_code, style=\"red\")\r\n    cons.log(response.text, style=\"red\")\r\n    sys.exit()\r\n\r\nif not data:\r\n    cons.log(\"Žádná data k aktualizaci\", style=\"yellow\")\r\n    sys.exit()\r\n\r\n\r\n# --- 2. Funkce pro vyplnění dat (nahraď selenium daty později) ---\r\ndef selenium_foo(data) -> dict[str, list[dict]]:\r\n    order_list = [\r\n        {\r\n            \"708809617500494793-O\": {\r\n                \"name\": \"Horakova Magda\",\r\n                \"zip_code\": \"51801\",\r\n                \"city\": \"Praha\",\r\n                \"street\": \"Konvalinkova 15\",\r\n                \"phone\": \"234234234\",\r\n                \"email\": \"horakova.magda@seznam.cz\",\r\n            }\r\n        },\r\n        {\r\n            \"709809544700494450-O\": {\r\n                \"name\": \"Zakordonets Kateryna\",\r\n                \"zip_code\": \"30100\",\r\n                \"city\": \"Praha\",\r\n                \"street\": \"Konvalinkova 15\",\r\n                \"phone\": \"234234234\",\r\n                \"email\": \"katerina@seznam.cz\",\r\n            }\r\n        },\r\n        {\r\n            \"708807379000495388-R\": {\r\n                \"name\": \"Pepa\",\r\n                \"zip_code\": \"54321\",\r\n                \"city\": \"Brno\",\r\n                \"street\": \"Jabloňová 3\",\r\n                \"phone\": \"777888999\",\r\n                \"email\": \"pepa@centrum.cz\",\r\n            }\r\n        },\r\n        {\r\n            \"708806960800494870-R\": {\r\n                \"name\": \"Lucie\",\r\n                \"zip_code\": \"10000\",\r\n                \"city\": \"Ostrava\",\r\n                \"street\": \"Školní 22\",\r\n                \"phone\": \"602123456\",\r\n                \"email\": \"lucie@volny.cz\",\r\n            }\r\n        },\r\n        {\r\n            \"708804205600494935-O\": {\r\n                \"name\": \"Karel\",\r\n                \"zip_code\": \"11000\",\r\n                \"city\": \"Plzeň\",\r\n                \"street\": \"Hlavní 5\",\r\n                \"phone\": \"601987654\",\r\n                \"email\": \"karel@email.cz\",\r\n            }\r\n        },\r\n    ]\r\n    \r\n    return {\"updates\": order_list}\r\n\r\n\r\n# --- 3. Odeslání aktualizací ---\r\npayload = selenium_foo(data)\r\ncons.log(\"Odesílám payload:\", payload)\r\n\r\ntry:\r\n    response = requests.post(API_URL_UPDATE, json=payload, headers=headers, timeout=5)\r\n    cons.log(\"Status code:\", response.status_code)\r\n    cons.log(\"Odpověď serveru:\", response.json())\r\nexcept Exception as e:\r\n    cons.log(f\"Chyba při POST: {e}\", style=\"red\")\r\n
===================================================================
diff --git a/bot.py b/bot.py
--- a/bot.py	(revision 17f02f0d342b997f003546f6e389a626ae502331)
+++ b/bot.py	(date 1749286972074)
@@ -6,7 +6,7 @@
 
 cons: Console = Console()
 
-TOKEN = "40ecc9e490d45b6523c549aacae86acfe29bd5da"
+TOKEN = "0f559f8a2f34b65b335e55bbd3a77e605fde1984"
 
 # Adresa API
 API_URL_GET = "http://localhost:8000/api/incomplete-customers/"
